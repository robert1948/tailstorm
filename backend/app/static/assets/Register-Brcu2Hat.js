import{r as s,u as w,A as y,j as e,g as b}from"./index-DQUQMXv2.js";function S(){const[r,h]=s.useState(""),[o,p]=s.useState(""),[i,l]=s.useState(""),n=w(),{user:c,setUser:g}=s.useContext(y);s.useEffect(()=>{c&&n("/dashboard")},[c,n]);const m=async t=>{t.preventDefault(),l("");try{const a=await fetch("http://localhost:8000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})}),x=await a.json();if(!a.ok)throw new Error(x.detail||"Registration failed");const d=await fetch("http://localhost:8000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})}),u=await d.json();if(!d.ok)throw new Error(u.detail||"Auto-login failed");localStorage.setItem("token",u.access_token);const f=await b();g(f),n("/dashboard")}catch(a){l(a.message||"Unexpected registration error")}};return e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("form",{onSubmit:m,className:"bg-white p-6 rounded shadow-md w-80 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Register"}),i&&e.jsx("p",{className:"text-red-500 text-sm",children:i}),e.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:t=>h(t.target.value),required:!0,className:"w-full px-3 py-2 border rounded"}),e.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:t=>p(t.target.value),required:!0,className:"w-full px-3 py-2 border rounded"}),e.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition",children:"Sign Up"})]})})}export{S as default};
