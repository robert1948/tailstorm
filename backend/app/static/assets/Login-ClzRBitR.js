import{r as a,A as g,u as h,j as e}from"./index-DQUQMXv2.js";function f(){const[r,u]=a.useState(""),[o,c]=a.useState(""),[n,l]=a.useState(""),{setUser:d}=a.useContext(g),m=h(),x=async t=>{t.preventDefault(),l("");try{const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})});if(!s.ok){const b=await s.json();throw new Error(b.detail||"Login failed")}const i=await s.json();localStorage.setItem("token",i.access_token),d(i.user),m("/dashboard")}catch(s){l(s.message)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 px-4",children:e.jsxs("form",{onSubmit:x,className:"bg-white p-8 rounded-xl shadow max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-blue-600",children:"Login to CapeControl"}),n&&e.jsx("p",{className:"text-red-600 mb-4 text-sm",children:n}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",value:r,onChange:t=>u(t.target.value),className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:t=>c(t.target.value),className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-semibold py-2 rounded hover:bg-blue-700 transition",children:"Login"})]})})}export{f as default};
